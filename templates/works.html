{% extends 'base.html' %}
{% block content %}
<h1>Our Works</h1>

<div class="row card-panel grey lighten-5">
        <form action="{{ url_for('search') }}" method="POST" class="col s12">
            <div class="row valign-wrapper center-align">
                <div class="input-field col s12 m8">
                    <i class="fas fa-search prefix light-blue-text text-darken-4"></i>
                    <input type="text" name="query" id="query" minlength="3" class="validate" required>
                    <label for="query">Search Works</label>
                </div>
                <div class="input-field col s12 m8">
                    <select id="search-key" name="search-key">
                        <option value="" disabled selected>Choose Category</option>
                        {% for key in keys %}
                        <option value="{{key.key_name}}">{{key.key_name}}</option>
                        {% endfor %}
                    </select>
                    <label>Search For</label>
                </div>
                <div class="col s12 m4">
                    <a href="{{ url_for('get_works') }}" class="red btn text-shadow">Reset</a>
                    <button type="submit" class="light-blue darken-1 btn text-shadow">
                        <i class="fas fa-search left"></i> Search
                    </button>
                </div>
            </div>
        </form>
    </div>


<div class="row card-panel grey lighten-5">
        <form action="{{ url_for('filter_works') }}" method="POST" class="col s12">
            <div class="row valign-wrapper center-align">
                <div class="input-field col s12 m8">
                    <select id="genre-filter" name="genre_name">
                        <option value="" disabled selected>Choose Genre</option>
                        {% for gen in genres %}
                        <option value="{{gen.genre_name}}">{{gen.genre_name}}</option>
                        {% endfor %}
                    </select>
                    <label>Genre</label>
                </div>
                <div class="col s12 m4">
                    <a href="{{ url_for('get_works') }}" class="red btn text-shadow">Reset</a>
                    <button type="submit" class="light-blue darken-1 btn text-shadow">
                        <i class="fas fa-search left"></i> Filter
                    </button>
                </div>
            </div>
        </form>
    </div>
<div>
<a href="{{ url_for('add_work') }}"><i class="material-icons right">add_circle</i></a>
</div>

<div>
    {% for work in works %}
        <div class="page">
            <p><a href="{{ url_for('view_work', work_id=work._id) }}">{{ work.title }}</a></p>
            <p>{{ work.author }}</p>
            <p>{{ work.genre }}</p>
            <p>Writings:</p>
            {% for writing in format_poetry_writing(work.writing) %}
            <p class="format-text">{{writing}}</p>
            {% endfor %}
        </div>
    {% endfor %}
</div>
{% endblock %}