{% extends 'base.html' %}
{% block content %}

    <div class="row">
        <div class="col s12 m8 offset-m2">
            <div class="card-panel">
                <h1 class="center-align">
                    {{ username }}'s Profile
                </h1>
            </div>
        </div>
    </div>

<div class="row">
    <div id="filter-div" class="col s12">
        <form action="{{ url_for('filter_profile') }}" method="POST" class="">
                    <div class="col s12 m6 l4 offset-l3 input-field center-align">
                        <select id="genre-filter" name="genre_name">
                            <option value="" disabled selected>Filter By Genre</option>
                            {% for gen in genres %}
                            <option value="{{gen.genre_name}}">{{gen.genre_name}}</option>
                            {% endfor %}
                        </select>
                    </div>
                
                <div class="col s12 m6 l3 center-align">
                    <a href="{{ url_for('profile') }}" class="reset-button">Reset</a>
                    <button type="submit" class="filter-button">
                        <i class="fas fa-list left"></i> Filter
                    </button>
                </div>
        </form>
    </div>
</div>

    {% for work in works %}
        {% if session["user"]|lower == work.author|lower %}
            <div>
                <div>
                    <p><a href="{{ url_for('view_work', work_id=work._id) }}">{{ work.title }}</a></p>
                    <p>{{ work.author }}</p>
                    <p>{{ work.genre }}</p>
                    <p>Writings:</p>
                    {% for writing in format_poetry_writing(work.writing) %}
                        <p>{{writing}}</p>
                    {% endfor %}
                </div>
        
                <a href="{{ url_for('edit_work', work_id=work._id) }}"><i class="material-icons right">edit</i></a>
                <a href="{{ url_for('delete_work', work_id=work._id) }}"><i class="material-icons right">delete</i></a>
            </div>
        {% endif %}
    {% endfor %}
{% endblock %}